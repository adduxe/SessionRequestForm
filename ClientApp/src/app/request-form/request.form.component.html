
<h3 style="color:darkred">New Session Request</h3>
<div class="col-md-pull-5" style="padding: 0px;">
  Complete this form to request the new session for your department.
</div><br />

<h4 style="color:darkred;padding:0px;">Session Details</h4>
<hr style="border-color:darkred" />

<div class="row">

  <div class="form-group col-md-6" id="semesterBox">

    <label for="semester" class="col-md-6 control-label">
      <abbr title="Session semester being applied for">For Semester</abbr>
    </label>

    <div class="col-md-6" style="vertical-align: bottom;">
      <kendo-dropdownlist #semester
            id="semester"
            [(ngModel)]="session.academicTerm"
            [data]="semesters"
            [valueField]="'semCode'"
            [textField]="'semName'"
            (selectionChange)="TermSelected($event)">
      </kendo-dropdownlist>
    </div>

  </div>

  <div class="form-group col-md-6" id="sessionCodeBox">

    <label for="sessCode" class="col-md-6 control-label">
      <abbr title="Enter the 3-digit code that was used for this session previously. If you do not know the Session Code assigned to this academic program, or if the special program is new, please leave this field blank">
        Session Code
      </abbr>
    </label>

    <div class="col-md-6">
      <kendo-dropdownlist
            id="sessCode"
            [(ngModel)]="session.code"
            [data]="SessionCodes"
            [valueField]="'sessionCode'"
            [textField]="'sessionDesc'"
            [filterable]="true"
            (filterChange)="filterSessionCodes($event)"
            style="width:250px;">
      </kendo-dropdownlist>
    </div>
  </div>

</div>

<h4 style="color:darkred;padding:0px;">Dates</h4>
<hr style="border-color:darkred" />

<div class="row">

  <div class="form-group col-md-6" id="firstDayClassBox">
    <label for="classesStartDate" class="col-md-6 control-label">
      <abbr title="Session Start Date">First Day of Classes</abbr>
    </label>
    <div class="col-md-6">
      <kendo-datepicker id="classStartDate"
                        [(ngModel)]="session.firstDayOfClasses">
      </kendo-datepicker>
    </div>
  </div>

  <div class="form-group col-md-6" id="firstDayFinalsBox">

    <label for="finalsStartDate" class="col-md-6 control-label">
      <abbr title="Finals Start Date">First Day of Finals</abbr>
    </label>

    <div class="col-md-6">
      <kendo-datepicker id="finalsStartDate"
                        [(ngModel)]="session.firstDayOfFinals">
      </kendo-datepicker>
    </div>

  </div>

</div>

<div class="row">

  <div class="form-group col-md-6" id="lastDayClassBox">

    <label for="classesEndDate" class="col-md-6 control-label">
      <abbr title="Session End Date">Last Day of Classes</abbr>
    </label>
    <div class="col-md-6">
      <kendo-datepicker id="classEndDate"
                        [(ngModel)]="session.lastDayOfClasses">
      </kendo-datepicker>
    </div>

  </div>

  <div class="form-group col-md-6" id="lastDayFinalsBox">

    <label for="finalsEndDate" class="col-md-6 control-label">
      <abbr title="Session End Date">Last Day of Finals</abbr>
    </label>
    <div class="col-md-6">
      <kendo-datepicker id="finalsEndDate"
                        [(ngModel)]="session.lastDayOfFinals">
      </kendo-datepicker>
    </div>

  </div>

</div>

<div class="row">
  <div class="col-md-6">
    <!--<button class="form-control uscGoldButton" value="Add Session Breaks" (click)="AddSessionBreak();">
    Add Session Break
  </button>-->
    &nbsp;&nbsp;&nbsp;<b>Does this session have any breaks?</b>&nbsp;&nbsp;
  <input type="radio" name="sessBreaks" value="true" (click)="AddSessionBreak(true)" />&nbsp;<b>Yes</b>&nbsp;
  <input type="radio" name="sessBreaks" value="false" (click)="AddSessionBreak(false)" />&nbsp;<b>No</b>
  <br/><br/>
  </div>
  <div class="col-md-6">
    &nbsp;
  </div>
</div>

<!--  Session Breaks section -->
<div *ngIf="session.sessionBreaks.length" class="Breaks">

  <div class="row" style="align-self:center;">
    <div class="col-md-1">
    </div>
    <div class="col-md-4" style="text-align:left;">
      <h4>Break Start</h4>
    </div>
    <div class="col-md-4" style="text-align:left;">
      <h4>Break End</h4>
    </div>
    <div class="col-md-3">
      &nbsp;
    </div>
  </div>

  <div class="row" style="align-items:center;padding-bottom:5px;" *ngFor="let eachBreak of session.sessionBreaks; let x = index" [attr.data.index]="x">

    <div class="col-md-1" style="text-align:right;">
    </div>
    <div class="col-md-4" style="align-self:center;">

      <kendo-datepicker
          [(ngModel)]="eachBreak.startDate">
      </kendo-datepicker>

    </div>
    <div class="col-md-4" style="align-self:center;">

      <kendo-datepicker
          [(ngModel)]="eachBreak.endDate">
      </kendo-datepicker>

    </div>
    <div class="col-md-3" style="align-self:center;">
      (Optional)
      <!--<a href="javascript:;" class="uscRedButton" title="Delete this Semester Break" (click)="DeleteSessionBreak(x)">
        [X] Remove this Break
      </a>-->
    </div>
  </div>

</div>
<!-- End of Session Breaks Section -->

<div id="locationFields" *ngIf="session.firstDayOfClasses  &&  session.lastDayOfClasses">

  <h4 style="color:darkred;padding:0px;">Locations</h4>
  <hr style="border-color:darkred" />

  <div class="row">
    <div class="col-md-4">&nbsp;</div>
    <div class="col-md-4">
      <button class="form-control uscGoldButton" value="Add Class Locations" (click)="AddClassLocation();">
        Add Class Location
      </button>
      <!--<kendo-autocomplete
          required
          [suggest]="true"
          [placeholder]="'Type the Campus Name'"
          (valueChange)="AddClassLocation($event)"
          [data]="CampusNameArray"
          style="width:400px;">
      </kendo-autocomplete>-->
    </div>
    <div class="col-md-4">&nbsp;</div>
  </div>

  <!-- Start of Class Locations Section -->
  <div *ngIf="(session.classLocations.length)" class="Locations">

    <div class="row" style="align-self:center;">
      <div class="col-md-4" style="text-align:center;">
        <h4>Campus</h4>
      </div>
      <div class="col-md-3">
        <h4 *ngIf="(session.classLocations.length > 1)">Start Date</h4>
      </div>
      <div class="col-md-3">
        <h4 *ngIf="(session.classLocations.length > 1)">End Date</h4>
      </div>
      <div class="col-md-2">
        &nbsp;
      </div>
    </div>
    <div class="row" style="align-items:center;padding-bottom:5px;"
         *ngFor="let eachLocation of session.classLocations; let i = index" [attr.data-index]="i">

      <div class="col-md-4">
        <kendo-dropdownlist  style="width: 250px; margin-left:50px;"
            *ngIf="(UscCampuses.length)"
            [(ngModel)]="eachLocation.code"
            [data]="UscCampuses"
            [valueField]="'campusCode'"
            [textField]="'campusName'"
            [filterable]="true"
            (filterChange)="filterCampusLocation($event)">
        </kendo-dropdownlist>
        <!--<input type="text" [(ngModel)]="eachLocation.code.campusName">-->
      </div>

      <div class="col-md-3" style="align-self:center;">
        <kendo-datepicker
            *ngIf="(session.classLocations.length > 1)"
            [(ngModel)]="eachLocation.startDate">
        </kendo-datepicker>
      </div>

      <div class="col-md-3" style="align-self:center;">

        <kendo-datepicker
            *ngIf="(session.classLocations.length > 1)"
            [(ngModel)]="eachLocation.endDate">
        </kendo-datepicker>

      </div>
      <div class="col-md-2" style="align-self:center;">
        <a href="javascript:;" class="uscRedButton" title="Delete this Class Location" (click)="DeleteClassLocation(i)">
          [X] Remove this Location
        </a>
      </div>
    </div>
  </div>
  <!-- End of Class Locations Section -->
</div>


<div id="rateFields" *ngIf="termRates && session.academicTerm.semCode">

  <h4 style="color:darkred;padding:0px;">Rates</h4>
  <hr style="border-color:darkred" />

  <div class="row">

    <div class="form-group col-md-6" id="rateTypeBox">

      <label for="rateType" class="col-md-6 control-label">
        <abbr title="Indicate the appropriate tuition rate type for this Session">Tuition Rate Type</abbr>
      </label>
      <div class="col-md-6">
        <kendo-dropdownlist
            *ngIf="(termRates.length > 0)"
            [(ngModel)]="session.rateType"
            [data]="termRates"
            [valueField]="'rateTypeCode'"
            [textField]="'rateTypeDesc'"
            [filterable]="true"
            (filterChange)="filterRates($event)"
            style="width:250px;">
        </kendo-dropdownlist>
      </div>
    </div>

    <div class="form-group col-md-6" id="blankBox">
      <div class="col-md-6">&nbsp;</div>
      <div class="col-md-6">
        <div class="col-md-6"><b>Min</b></div>
        <div class="col-md-6"><b>Max</b></div>
      </div>
    </div>

  </div>

  <div class="row">

    <div class="form-group col-md-6" id="tuitionFlatRateBox">
      <label for="tuitionFlatRate" class="col-md-6 control-label">
        <abbr title="Tuition flat rate in dollars">Tuition Amount Flat Rate</abbr>
      </label>
      <div class="col-md-6">
        <kendo-numerictextbox
            id="tuitionFlatRate"
            [(ngModel)]="session.rateType.rateTypeFlatRate"
            [format]="'a0'"
            [min]="0"
            [spinners]="false">
        </kendo-numerictextbox>
      </div>
    </div>

    <div class="form-group col-md-6" id="ugradFlatRateRangeBox">

      <label for="flatUnitsMin" class="col-md-6 control-label">
        <abbr title="Tuition flat rate range in units">Undergrad Flat Rate Range (units)</abbr>
      </label>

      <div class="col-md-6" style="align-items:center;">

        <kendo-numerictextbox
            id="flatUnitsMin"
            [(ngModel)]="session.flatRateUnitRange.undergraduate.minimum"
            [format]="'n0'"
            [min]="1"
            [max]="MAXUNITS - 1"
            style="width:75px;">
        </kendo-numerictextbox>

        &nbsp;to&nbsp;

        <kendo-numerictextbox
            id="flatUnitsMax"
            [(ngModel)]="session.flatRateUnitRange.undergraduate.maximum"
            [format]="'n0'"
            [min]="2"
            [max]="MAXUNITS - 1"
            style="width:75px;">
        </kendo-numerictextbox>
      </div>

    </div>

  </div>

  <div class="row">

    <div class="form-group col-md-6" id="tuitionPerUnitBox">

      <label for="tuitionUnitRate" class="col-md-6 control-label">
        <abbr title="Tuition per unit rate in dollars">Tuition Amount per Unit</abbr>
      </label>

      <div class="col-md-6">

        <kendo-numerictextbox
            [(ngModel)]="session.rateType.rateTypeUnitRate"
            [format]="'a0'"
            [min]="0"
            [spinners]="false">
        </kendo-numerictextbox>

      </div>
    </div>

    <div class="form-group col-md-6" id="gradFlatRateRangeBox">

      <label for="gradFlatUnitsMin" class="col-md-6 control-label">
        <abbr title="Tuition flat rate in dollars">Graduate Flat Rate Range (units)</abbr>
      </label>

      <div class="col-md-6" style="align-items:center;">

        <kendo-numerictextbox
            id="gradFlatUnitsMin"
            [(ngModel)]="session.flatRateUnitRange.graduate.minimum"
            [format]="'n0'"
            [min]="1"
            [max]="MAXUNITS - 1"
            style="width:75px;">
        </kendo-numerictextbox>

        &nbsp;to&nbsp;

        <kendo-numerictextbox
            id="gradFlatUnitsMax"
            [(ngModel)]="session.flatRateUnitRange.graduate.maximum"
            [format]="'n0'"
            [min]="2"
            [max]="MAXUNITS - 1"
            style="width:75px;">
        </kendo-numerictextbox>

      </div>
    </div>
  </div>
</div>

<div id="SpecialFeesSection" *ngIf="SpecialFeeList && session.academicTerm.semCode">

  <h4 style="color:darkred;padding:0px;">Special Fees</h4>
  <hr style="border-color:darkred" />

  <div class="row" style="margin-left: auto; margin-right: auto;">
    <div class="col-md-4">&nbsp;</div>
    <div class="col-md-4">
      <button class="form-control uscGoldButton" value="Add Special Fees" (click)="AddSpecialFee(semester);">
        Add Special Fee
      </button>
    </div>
    <div class="col-md-4">&nbsp;</div>
  </div>

    <!-- Start of Special Fees Section -->
    <div class="Fees" *ngIf="session.specialFees.length">

      <div class="row" style="align-self:center;">
        <div class="col-md-1"></div>
        <h4 class="col-md-5">Special Fee</h4>
        <h4 class="col-md-2">Amount</h4>
        <h4 class="col-md-2">Assessed to</h4>
        <h4 class="col-md-2"></h4>
      </div>
      <div class="row" *ngFor="let eachFee of session.specialFees; let n = index" [attr.data-index]="n">
        <div class="col-md-1"></div>
        <div class="col-md-5">

          <kendo-dropdownlist
              *ngIf="(SpecialFeeList.length > 0)"
              [(ngModel)]="eachFee.fee"
              [data]="SpecialFeeList"
              [valueField]="'code'"
              [textField]="'name'"
              style="width:350px;">
          </kendo-dropdownlist>

        </div>

        <div class="col-md-2">
          <kendo-numerictextbox
              [(ngModel)]="eachFee.amount"
              [format]="'a0'"
              [min]="0"
              [spinners]="false">
          </kendo-numerictextbox>
        </div>

        <div class="col-md-2">

          <kendo-dropdownlist
            [(ngModel)]="eachFee.appliedTo"
            [data]="AssessedTo"
            [valueField]="'gradeCode'"
            [textField]="'gradeName'">
          </kendo-dropdownlist>

        </div>
        <div class="col-md-2">
          <a href="javascript:;" class="uscRedButton" title="Delete this Special Fee" (click)="DeleteThisFee(n);">
            [X] Remove this Fee
          </a>
        </div>
      </div>
    </div>
    <!-- End of Special Fees Section -->
  </div>

<br />
<div class="row" style="align-content:center;">
    <div class="col-md-5 red" style="text-align: center;">
      <h4><b>{{ formError }}</b></h4>
    </div>
    <div class="col-md-2">
      <input type="submit" class="form-control uscRedButton" (click)="SubmitForm();" value="Submit" />
    </div>
    <div class="col-md-5">
    </div>
</div>

<br/>
